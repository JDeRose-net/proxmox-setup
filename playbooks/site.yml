---
- name: Configure Proxmox PVE hosts
  hosts: proxmox
  gather_facts: true

  pre_tasks:
    - name: Display target environment
      ansible.builtin.debug:
        msg: "Configuring {{ inventory_hostname }} for {{ env_name | default('unknown') }} environment"

  roles:
    - base
    - users
    - security
    - proxmox

  post_tasks:
    - name: Configuration complete
      ansible.builtin.debug:
        msg: "Proxmox host {{ inventory_hostname }} configuration complete"
